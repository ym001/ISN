<!--
   calculatrice.html
   
   Copyright 2014 <yves.mercadier@ac-montpellier.fr>
   
   This program is free software; you can redistribute it and/or modify
   it under the terms of the GNU General Public License as published by
   the Free Software Foundation; either version 2 of the License, or
   (at your option) any later version.
   
  sujet : Calculatrice graphique en javascript.
   
   
-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
	"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
	<title>Calculatrice graphique</title>
	<meta http-equiv="content-type" content="text/html;charset=utf-8" />
	<meta name="generator" content="Geany 1.22" />
	<SCRIPT language="javascript">
	
	
	function un() { 
			document.formulaire.textResultat.value=document.formulaire.textResultat.value+"1";
	}
	function deux() { 
			document.formulaire.textResultat.value=document.formulaire.textResultat.value+"2";
	}
	function trois() { 
			document.formulaire.textResultat.value=document.formulaire.textResultat.value+"3";
	}
	function quatre() { 
			document.formulaire.textResultat.value=document.formulaire.textResultat.value+"4";
	}
	function cinq() { 
			document.formulaire.textResultat.value=document.formulaire.textResultat.value+"5";
	}
	function six() { 
			document.formulaire.textResultat.value=document.formulaire.textResultat.value+"6";
	}
	function sept() { 
			document.formulaire.textResultat.value=document.formulaire.textResultat.value+"7";
	}
	function huit() { 
			document.formulaire.textResultat.value=document.formulaire.textResultat.value+"8";
	}
	function neuf() { 
			document.formulaire.textResultat.value=document.formulaire.textResultat.value+"9";
	}
	function zero() { 
			document.formulaire.textResultat.value=document.formulaire.textResultat.value+"0";
	}
	function un() { 
			document.formulaire.textResultat.value=document.formulaire.textResultat.value+"1";
	}
	function addition() { 
			document.formulaire.textResultat.value=document.formulaire.textResultat.value+"+";
	}
	function multiplication() { 
			document.formulaire.textResultat.value=document.formulaire.textResultat.value+"*";
	}
	function division() { 
			document.formulaire.textResultat.value=document.formulaire.textResultat.value+"/";
	}
	function soustraction() { 
			document.formulaire.textResultat.value=document.formulaire.textResultat.value+"-";
	}
	function x() { 
			document.formulaire.textResultat.value=document.formulaire.textResultat.value+"x";
	}
	
	function point() { 
			document.formulaire.textResultat.value=document.formulaire.textResultat.value+".";
	}
	function calcul() { 
			document.formulaire.textResultat.value=eval(document.formulaire.textResultat.value);
	}
	function graphique() {
	// fonction pour dessiner
  var f = document.formulaire.textResultat.value;
  // Largeur et hauteur en pixels
  var W=400, H=300
  var canvas = document.getElementById("papier");
  canvas.width=W; canvas.height=H;
  var ctx = canvas.getContext("2d");
  
  var pas=parseFloat(document.formulaire.textPasCalcul.value);
  var nbpoint=parseFloat(document.formulaire.textNombrePoint.value);
  var x0=parseFloat(document.formulaire.textAbcisseDepart.value);
  // nb de pixels pour une unité
  var sc=20;
  // tracé du quadrillage
  ctx.strokeStyle = "#666";
  ctx.beginPath();
  ctx.lineWidth=0.5;
  // lignes horizontales
  for(var i=0; i<=H; i=i+sc) {
    ctx.moveTo(0, H-i)
    ctx.lineTo(W, H-i)
  }
  // lignes verticales
  for(var i=0; i<=W; i=i+sc) {
    ctx.moveTo(i,H)
    ctx.lineTo(i,0)
  }
  ctx.stroke();
  // tracé de la fonction
  var x;
  with(Math) { 
    ctx.strokeStyle = "#ff0000";
    ctx.lineWidth=1.5;
    ctx.beginPath();
    
    x=x0;
    var u=eval(f)
    ctx.moveTo(0, H-u)
    var fin=x0+pas*nbpoint;
    for(x=x0; x<fin; x=x+pas) {
      u=eval(f)
      //ctx.lineTo((x-x0)*w/(pas*nbpoint), H-u*sc)
      //document.write("x="+(x-x0)*w/(pas*nbpoint)); 
      var xa=(x-x0)*W/nbpoint/pas;
      ctx.lineTo(xa, H-u)
    }
  
  //ctx.closePath();
  ctx.stroke();
}
	}
</SCRIPT> 
<link rel="stylesheet" type="text/css" href="calculatrice.css" media="all"/>
</head>
<body>
	<CENTER>
	<canvas id="papier" width="290px" height="300"></canvas>
	</CENTER>
<CENTER>
<FORM name="formulaire">
<TABLE >
	<CAPTION>CACULATRICE GRAPHIQUE</CAPTION>
	<TR><TD>Fonction</TD><TD colspan=4><INPUT type="text" name="textResultat" value="calcul" style="width:290px"></TD></TR>
	<TR><TD></TD><TD>
		<TABLE >
		<TR><TD><INPUT  id="gobutton" type="button" name="buttonSept" value="7" onClick="sept()"style="width:70px"></TD><TD><INPUT id="gobutton" type="button" name="buttonHuit" value="8" onClick="huit()"style="width:70px"></TD><TD><INPUT id="gobutton"type="button" name="buttonNeuf" value="9" onClick="neuf()"style="width:70px"></TD><TD><INPUT id="gobutton" type="button" name="buttonDiviser" value="/" onClick="division()"style="width:70px"></TD></TR>
	
		<TR><TD><INPUT id="gobutton" type="button" name="buttonquatre" value="4" onClick="quatre()"style="width:70px"></TD><TD><INPUT id="gobutton" type="button" name="buttonCinq" value="5" onClick="cinq()"style="width:70px"></TD><TD><INPUT id="gobutton" type="button" name="buttonSix" value="6" onClick="six()"style="width:70px"></TD><TD><INPUT id="gobutton" type="button" name="buttonMultiplier" value="*" onClick="multiplication()"style="width:70px"></TD></TR>
	
		<TR><TD><INPUT id="gobutton" type="button" name="buttonUn" value="1" onClick="un()"style="width:70px"></TD><TD><INPUT id="gobutton" type="button" name="buttonDeux" value="2" onClick="deux()"style="width:70px"></TD><TD><INPUT id="gobutton" type="button" name="buttonTrois" value="3" onClick="trois()"style="width:70px"></TD><TD><INPUT id="gobutton" type="button" name="buttonSoustraire" value="-" onClick="soustraction()"style="width:70px"></TD></TR>

		<TR><TD><INPUT id="gobutton" type="button" name="buttonZero" value="0" onClick="zero()"style="width:70px"></TD><TD><INPUT id="gobutton" type="button" name="buttonPoint" value="." onClick="point()"style="width:70px"></TD><TD><INPUT id="gobutton" type="button" name="textEgal" value="graphique" onClick="graphique()"style="width:70px"></TD><TD><INPUT id="gobutton" type="button" name="buttonPlus" value="+" onClick="addition()"style="width:70px"></TD></TR>
	
		</TABLE>
	<TR><TD>X0</TD><TD colspan=4><INPUT type="text" name="textAbcisseDepart" value="Abscisse de départ" style="width:290px"></TD></TR>
	<TR><TD>Pas</TD><TD colspan=4><INPUT type="text" name="textPasCalcul" value="Pas de calcul" style="width:290px"></TD></TR>
	<TR><TD>Nb point</TD><TD colspan=4><INPUT type="text" name="textNombrePoint" value="Nombre de point" style="width:290px"></TD></TR>

</TABLE>
</FORM>
</CENTER>

</body>
</html>
